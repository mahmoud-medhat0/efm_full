import{r as y,j as e,L as m,a as d,_ as x,d as L}from"./app-D5MfbbIn.js";import{B as N}from"./Button-DsS6cZ8E.js";import{I as w}from"./Input-DsjKNsjn.js";import{L as R,I as S,o as k,l as E}from"./index-sNHqzqM3.js";import{u as F}from"./index.esm-d0l4HNWY.js";import{R as I}from"./layout-CbM__-dg.js";import{s as a}from"./index-C4JomMCi.js";import"./Footer-B-MAmbLt.js";import"./use-text-value-CvndwsPN.js";import"./use-is-mounted-DBKzB3mQ.js";import"./twitter-C2_HC0eX.js";const G=()=>{const[p,i]=y.useState(!1),{register:u,handleSubmit:h,formState:{errors:n}}=F({resolver:k(E)}),f=async t=>{var o;i(!0);try{const s=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"),{status:r,data:c}=await d.post(a("client.login.post"),t,{headers:{"X-CSRF-TOKEN":s}});if(r===200||r===201)x.success("Login successful! Redirecting in 2 seconds...",{position:"bottom-center",duration:4e3}),setTimeout(()=>{L.Inertia.get(a("client.dashboard"))},2e3);else throw new Error("Unexpected response status")}catch(s){console.error(s);let r="An unexpected error occurred";d.isAxiosError(s)&&s.response&&(r=s.response.data.message||s.message),x.error(`Login failed: ${r}`,{position:"bottom-center",duration:3e3})}finally{i(!1)}},g=R.map(({name:t,placeholder:o,type:s,forl:r,placel:c,validation:j},b)=>{var l;return e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-2 pb-1",children:[e.jsx("label",{htmlFor:r,className:"text-black text-xl",children:c}),e.jsx(w,{id:r,type:s,placeholder:o,...u(t,j)})]}),n[t]&&e.jsx(S,{msg:(l=n[t])==null?void 0:l.message})]},b)});return e.jsx(I,{children:e.jsxs("section",{className:"w-[800px] my-20 mx-auto max-sm:w-full max-sm:px-3",children:[e.jsxs("h2",{className:"text-black text-2xl pb-6",children:["Login To ",e.jsx("span",{className:"text-primary",children:"EFM"}),"hub.com"]}),e.jsxs("form",{className:"w-[800px] space-y-3 mx-auto max-sm:w-full",onSubmit:h(f),children:[g,e.jsx(N,{fullWidth:!0,isLoading:p,children:"Login"}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs(m,{href:a("client.reset-password"),className:"text-black",children:["Forgot your password?",e.jsx("span",{className:"underline ml-1 text-primary",children:"Reset Password!"})]}),e.jsxs(m,{href:a("client.register"),className:"text-black",children:["Don't have an account here?",e.jsx("span",{className:"underline ml-1 text-primary",children:"Register here!"})]})]})]})]})})};export{G as default};
