import{r as L,t as x,j as e,L as p,a as u,_ as g,d as S}from"./app-XMKrjtai.js";import{B as k}from"./Button-DMqZ9lCn.js";import{I}from"./Input-DCmsDCYU.js";import{L as E,I as R,o as v,l as F}from"./index-BgZ01XDU.js";import{u as A}from"./index.esm-DUirE6IE.js";import{R as M}from"./layout-nJUuUeDF.js";import{s as n}from"./index-C4JomMCi.js";import"./Footer-JLedZr1F.js";import"./use-is-mounted-CvYztsN3.js";import"./transition-C-3xXfQE.js";import"./twitter-C2_HC0eX.js";const U=()=>{const[f,l]=L.useState(!1),{register:h,handleSubmit:w,formState:{errors:i}}=A({resolver:v(F)}),j=async o=>{var r;l(!0);try{const s=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"),{status:t,data:c}=await u.post(n("client.login.post"),o,{headers:{"X-CSRF-TOKEN":s}});if(t===200||t===201)g.success("Login successful! Redirecting in 2 seconds...",{position:"bottom-center",duration:4e3}),setTimeout(()=>{S.Inertia.get(n("client.dashboard"))},2e3);else throw new Error("Unexpected response status")}catch(s){console.error(s);let t="An unexpected error occurred";u.isAxiosError(s)&&s.response&&(t=s.response.data.message||s.message),g.error(`Login failed: ${t}`,{position:"bottom-center",duration:3e3})}finally{l(!1)}},b=E.map(({name:o,placeholder:r,type:s,forl:t,placel:c,validation:N},y)=>{var d;console.log(o),console.log(r);const a=x(o),m=x(r);return console.log(a),console.log(m),e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-2 pb-1",children:[e.jsx("label",{htmlFor:t,className:"text-black text-xl",children:c}),e.jsx(I,{id:t,type:s,placeholder:m,...h(a,N)})]}),i[a]&&e.jsx(R,{msg:(d=i[a])==null?void 0:d.message})]},y)});return e.jsx(M,{children:e.jsxs("section",{className:"w-full my-20 mx-auto max-sm:w-full max-sm:px-3 pt-20",children:[e.jsxs("h2",{className:"text-black text-2xl pb-6 text-center",children:[window.translate("login.title")," ",e.jsx("span",{className:"text-primary",children:window.translate("login.efm")}),window.translate("login.hub")]}),e.jsxs("form",{className:"w-[800px] space-y-3 mx-auto max-sm:w-full",onSubmit:w(j),children:[b,e.jsx(k,{fullWidth:!0,isLoading:f,children:window.translate("login.login")}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs(p,{href:n("client.reset-password"),className:"text-black",children:[window.translate("login.forgot"),e.jsx("span",{className:"underline ml-1 text-primary",children:window.translate("login.reset")})]}),e.jsxs(p,{href:n("client.register"),className:"text-black",children:[window.translate("login.dontHave"),e.jsx("span",{className:"underline ml-1 text-primary",children:window.translate("login.register")})]})]})]})]})})};export{U as default};
