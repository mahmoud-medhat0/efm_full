import{j as e,r as i,_ as p}from"./app-XT5EYP2d.js";import{M as k}from"./Modal-VPWXQtnu.js";import{F as v}from"./BanknotesIcon-8S81i0K1.js";import{F as I}from"./ClockIcon-DgDPJrSD.js";import{R as N}from"./layout-Bvx68fjS.js";import"./use-is-mounted-heIW7ehX.js";import"./Footer-DtGjXFzd.js";import"./index-C4JomMCi.js";import"./use-text-value-B-Zv-jm3.js";import"./twitter-C2_HC0eX.js";const C="/build/assets/youtube-D92JaMBb.png",m=({img:r,title:o,money:l,time:g,onClick:s})=>e.jsxs("div",{className:"bg-background w-[380px] rounded-lg overflow-hidden cursor-pointer",onClick:s,children:[e.jsx("img",{className:"w-full",src:r,alt:"yahia azzam"}),e.jsxs("div",{className:"py-4 px-2 space-y-1.5",children:[e.jsxs("h3",{className:"text-right flex flex-row justify-end items-start gap-2 text-white",title:o,children:[o," ",e.jsx("img",{className:"w-6 h-6",src:C,alt:"youtube-icon"})]}),e.jsxs("h4",{className:"flex flex-row justify-end items-start gap-2 text-gray-500",title:l,children:[l,e.jsx(v,{className:"w-6 h-6 text-primary"})]}),e.jsxs("h4",{className:"flex flex-row justify-end items-start gap-2 text-gray-500",title:g,children:[g,e.jsx(I,{className:"w-6 h-6 text-primary"})]})]})]}),R="/build/assets/ahmed_amar-DEIhpDZO.jpg",_="/build/assets/eyad_elmogy-COawVDK2.jpg",L="/build/assets/yahia_azzam-Cft2gtd3.jpg",T="/build/assets/marwan_serry-BU3wb9VU.jpg",V="/build/assets/mohamed_abdelaty-BKoMClAB.jpg",E="/build/assets/mesh_ebrahim_hegazy-zYQPGp3R.jpg",O=()=>{const r=i.useRef(null),[o,l]=i.useState(0),[g,s]=i.useState(!1),[x,h]=i.useState(null),y=()=>{console.log("Starting task...");const t=window.open("https://youtu.be/4BGLxxELr8A?si=FzqiP3GkYQRi2NaN","_blank");if(h(t),!t){console.warn("Failed to open YouTube window.");return}l(15);const u=()=>{try{t.closed?f(t):t.focus()}catch(d){console.error("Error checking window status:",d)}},a=setInterval(u,2e3);r.current=window.setInterval(()=>{l(d=>(console.log("Remaining Time:",d),d===0&&(clearInterval(r.current),clearInterval(a),f(t)),u(),d-1))},1e3),s(!0);const w=()=>{clearInterval(a)};window.addEventListener("beforeunload",w),window.addEventListener("unload",w)},j=n=>!n||n.closed,f=n=>{clearInterval(r.current),j(n)?(console.warn("YouTube window closed unexpectedly."),p.error("YouTube window closed unexpectedly. Task canceled.")):p.success("Task completed!"),s(!1),h(null),l(0)};i.useEffect(()=>(console.log("ViewVideosPage rendered."),()=>{console.log("ViewVideosPage unmounted.")}),[]),i.useEffect(()=>{o===0&&f(x)},[o]),i.useEffect(()=>{console.log("Checking for existing task...");const n=localStorage.getItem("taskInProgress"),t=localStorage.getItem("remainingTime");n==="true"&&t&&(l(parseInt(t)),s(!0),r.current=window.setInterval(()=>{l(a=>(console.log("Remaining Time:",a),a===0&&f(x),a-1))},1e3));const u=a=>{r.current&&(a.preventDefault(),a.returnValue="",console.warn("Task still in progress. Please finish before leaving the page."),p.error("Task still in progress. Please finish before leaving the page."))};return window.addEventListener("beforeunload",u),()=>{window.removeEventListener("beforeunload",u),localStorage.removeItem("taskInProgress"),localStorage.removeItem("remainingTime"),clearInterval(r.current)}},[x]);const c=()=>{y()},b=()=>{s(!1)};return e.jsx(N,{children:e.jsxs("main",{className:"w-full h-full my-20 container",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("h2",{className:"text-4xl text-black mb-4",children:["View ",e.jsx("span",{className:"mark",children:"Videos"})]}),o>0&&e.jsx(k,{isOpen:g,closeModal:b,children:e.jsxs("div",{className:"text-black text-lg",children:["Time remaining: ",Math.floor(o/60),":",o%60,"s"]})})]}),e.jsx("div",{className:"w-full py-20",children:e.jsxs("div",{className:"w-full flex flex-col items-center justify-end gap-y-5",children:[e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx(m,{URL:"player",img:R,title:"وعي ٧۳ - سيدنا إبراهيم عليه السلام",money:"3.30$",time:"2.5m",onClick:c}),e.jsx(m,{URL:"player",img:_,title:"جت كده - اياد الموجي و هشام جمال",money:"0.54$",time:"50s",onClick:()=>{c(),s(!0)}}),e.jsx(m,{URL:"player",img:L,title:"لما اشتغلت طيار ديليفري وكنت هروح في داهية",money:"0.18$",time:"30s",onClick:()=>{c(),s(!0)}})]}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx(m,{URL:"player",img:E,title:"لا يوجد جهاز آمن من الاختراق | مع ابراهيم حجازي",money:"5$",time:"5m",onClick:()=>{c(),s(!0)}}),e.jsx(m,{URL:"player",img:T,title:"اسئلة عبثية | الاسطي عبده البلف و اياد الموجي",money:"2$",time:"1.5m",onClick:()=>{c(),s(!0)}}),e.jsx(m,{URL:"player",img:V,title:"جت كده - مبقتش حمل مع كامل احترامي",money:"1.30$",time:"3m",onClick:()=>{c(),s(!0)}})]})]})})]})})};export{O as default};
