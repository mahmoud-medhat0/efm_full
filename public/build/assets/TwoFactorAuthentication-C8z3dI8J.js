import{r as t,R as p,u as se,j as e,a as F,n as k}from"./app-DvjYvVmX.js";import{W as te}from"./WelcomeTab-DKik_dcT.js";import ae from"./Layout-Juc-R7lY.js";import{M as A}from"./Modal-CXRk0H3f.js";import{s as E}from"./index-C4JomMCi.js";import{I as re}from"./Input-CZnuBtC4.js";import{B as O}from"./Button-Cq8jOrsW.js";import{F as U}from"./CheckBadgeIcon-Bn4-K3q7.js";import{F as L}from"./XMarkIcon-DxIc9hSa.js";import{W as oe,H,y as le,p as ne,o as y,$ as ie,a as ce,w as de,D as ue,b as me,d as G}from"./use-is-mounted-E77bZEoK.js";import{l as pe,T as fe,j as xe,p as he}from"./form-fields-BeKX5O-P.js";import{K as be,D as ge,z as we,U as je,G as ve,E as ye,H as Ne,L as Ce,r as $e}from"./use-text-value-D3SBErHr.js";import"./character-DSGNMOII.js";import"./ArrowUpCircleIcon-CWCJIuDj.js";import"./LinkIcon-D8odgiEA.js";import"./Footer-sbI_YyHd.js";import"./twitter-C2_HC0eX.js";import"./Navbar-C7o0XRwH.js";import"./ShoppingCartIcon-Bvgpg6IO.js";import"./DocumentTextIcon-7ex6XcYG.js";import"./DocumentCheckIcon-x_hHTBgd.js";let D=t.createContext(null);D.displayName="GroupContext";let Fe=t.Fragment;function ke(n){var i;let[s,c]=t.useState(null),[f,d]=we(),[x,r]=je(),m=t.useMemo(()=>({switch:s,setSwitch:c}),[s,c]),h={},b=n;return p.createElement(r,{name:"Switch.Description",value:x},p.createElement(d,{name:"Switch.Label",value:f,props:{htmlFor:(i=m.switch)==null?void 0:i.id,onClick(l){s&&(l.currentTarget instanceof HTMLLabelElement&&l.preventDefault(),s.click(),s.focus({preventScroll:!0}))}}},p.createElement(D.Provider,{value:m},H({ourProps:h,theirProps:b,slot:{},defaultTag:Fe,name:"Switch.Group"}))))}let Ee="button";function De(n,i){var s;let c=t.useId(),f=ve(),d=ye(),{id:x=f||`headlessui-switch-${c}`,disabled:r=d||!1,checked:m,defaultChecked:h,onChange:b,name:l,value:N,form:C,autoFocus:u=!1,...$}=n,g=t.useContext(D),a=t.useRef(null),q=le(a,i,g===null?null:g.setSwitch),w=pe(h),[j,v]=fe(m,b,w??!1),K=ne(),[S,T]=t.useState(!1),P=y(()=>{T(!0),v==null||v(!j),K.nextFrame(()=>{T(!1)})}),Q=y(o=>{if($e(o.currentTarget))return o.preventDefault();o.preventDefault(),P()}),W=y(o=>{o.key===G.Space?(o.preventDefault(),P()):o.key===G.Enter&&he(o.currentTarget)}),_=y(o=>o.preventDefault()),B=Ne(),V=Ce(),{isFocusVisible:I,focusProps:z}=ie({autoFocus:u}),{isHovered:M,hoverProps:J}=ce({isDisabled:r}),{pressed:R,pressProps:X}=de({disabled:r}),Y=t.useMemo(()=>({checked:j,disabled:r,hover:M,focus:I,active:R,autofocus:u,changing:S}),[j,M,I,R,r,S,u]),Z=ue({id:x,ref:q,role:"switch",type:me(n,a),tabIndex:n.tabIndex===-1?0:(s=n.tabIndex)!=null?s:0,"aria-checked":j,"aria-labelledby":B,"aria-describedby":V,disabled:r||void 0,autoFocus:u,onClick:Q,onKeyUp:W,onKeyPress:_},z,J,X),ee=t.useCallback(()=>{if(w!==void 0)return v==null?void 0:v(w)},[v,w]);return p.createElement(p.Fragment,null,l!=null&&p.createElement(xe,{disabled:r,data:{[l]:N||"on"},overrides:{type:"checkbox",checked:j},form:C,onReset:ee}),H({ourProps:Z,theirProps:$,slot:Y,defaultTag:Ee,name:"Switch"}))}let Se=oe(De),Te=ke,Pe=be,Ie=ge,Me=Object.assign(Se,{Group:Te,Label:Pe,Description:Ie});const ts=()=>{const i=se().props.auth.client;console.log(i.is_2a);const[s,c]=t.useState(i.is_2a),[f,d]=t.useState(!1),[x,r]=t.useState(""),[m,h]=t.useState(""),[b,l]=t.useState(!1),N=()=>{s?l(!0):F.get(E("client.dashboard.2fa-qr-url")).then(a=>{r(a.data.qrCodeUrl),d(!0)})},C=()=>{F.post(E("client.dashboard.disable-2fa.post")).then(a=>{c(!1),k.success(a.data.message),l(!1)})},u=()=>{l(!1)},$=()=>{F.post(E("client.dashboard.enable-2fa.post"),{code:m}).then(a=>{a.data.success?(c(!0),d(!1),k.success(a.data.message)):k.error(a.data.message)})},g=()=>{d(!1)};return e.jsxs(ae,{children:[e.jsxs("div",{className:"w-full h-auto mt-20",children:[e.jsx(te,{}),e.jsxs("div",{className:"w-full px-2 py-12 sm:px-0",children:[e.jsx("h3",{className:"text-lg mb-4",children:"Two Factor Authentication"}),e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("div",{className:"border border-[#63778652] py-4 px-6 rounded-xl shadow-md flex flex-col space-y-5 flex-grow",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-5",children:[e.jsx("div",{className:"bg-[#E8F0F7] rounded-full w-14 max-sm:w-28 p-3",children:s?e.jsx(U,{className:"text-green-600"}):e.jsx(L,{className:"text-red-600"})}),e.jsx("div",{className:"flex flex-col items-start justify-between",children:e.jsx("h4",{className:`${s?"text-green-600":"text-red-600"} font-medium`,children:s?"Active":"Inactive"})})]}),e.jsxs(Me,{checked:s,onChange:N,className:`${s?"bg-green-600":"bg-red-600"} relative flex h-[29px] w-[64px] shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75`,children:[e.jsx("span",{className:"sr-only",children:"Use setting"}),e.jsx("span",{"aria-hidden":"true",className:`${s?"translate-x-9":"translate-x-0"} pointer-events-none flex justify-center items-center h-[25px] w-[25px] transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out`,children:s?e.jsx(U,{className:"text-green-600"}):e.jsx(L,{className:"text-red-600"})})]})]})})})]})]}),e.jsx(A,{isOpen:f,closeModal:g,title:"Scan this QR Code to Enable 2FA",description:"Use your authenticator app to scan the QR code below.",children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[e.jsx("img",{src:x,alt:"2FA QR Code",className:"mx-auto mb-4 w-50 max-w-xs h-50"}),e.jsx("p",{className:"text-center mb-4",children:"Please enter the code from your authenticator app to enable 2FA."}),e.jsx(re,{type:"number",onChange:a=>h(a.target.value),placeholder:"Enter code",className:"mt-2 w-full p-2 rounded border border-gray-300"}),e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx(O,{onClick:$,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Enable"}),e.jsx(O,{onClick:g,className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Close"})]})]})}),e.jsx(A,{isOpen:b,closeModal:u,title:"Confirm Disable 2FA",description:"Are you sure you want to disable Two Factor Authentication?",children:e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx("button",{onClick:C,className:"bg-red-500 text-white px-4 py-2 rounded",children:"Disable"}),e.jsx("button",{onClick:u,className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Cancel"})]})})]})};export{ts as default};
