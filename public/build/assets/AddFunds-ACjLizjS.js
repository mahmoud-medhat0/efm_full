import{r as s,u as w,j as e,n as l,a as O,d as V}from"./app-DwP5ZHId.js";import{D as $,c as G}from"./DashboardLayout-D1zeXqou.js";import{m as K}from"./mony-DzEy0_kf.js";import{o as N,w as X,i as J,v as Q,b as Y}from"./banx-BZo8_k35.js";import{S as Z}from"./react-select.esm-DdkmZjfD.js";import{u as ee}from"./index.esm-D4UpaK7B.js";import"./index-C4JomMCi.js";import"./emotion-react.browser.esm-DTshvNkP.js";import"./floating-ui.dom-BHs9XJpa.js";const ce=()=>{const[d,g]=s.useState(null),p=w(),f=p.props.methods,{lang:h,app_url:B}=w().props;p.props.auth.client;const[n,y]=s.useState(null),[A,b]=s.useState(0),[c,j]=s.useState(0),[k,R]=s.useState(0),[_,F]=s.useState(0),{register:te,handleSubmit:I}=ee(),[E,W]=s.useState([]),T=f.map(o=>({value:o.id,label:e.jsxs("div",{style:{display:"flex",alignItems:"center",fontSize:"12px"},children:[e.jsx("img",{src:`${B}/storage/${o.logo}`,alt:`${o.name} Icon`,style:{width:"20px",marginRight:"8px"}}),o.name]})})),L=o=>{const a=f.find(r=>r.id===o.value);y(a),W(o),console.log("selectedMethod",a),a.client_fields&&a.client_fields.length>0&&a.client_fields.forEach(r=>{r.type})},v=(o,a)=>{if(o){const r=URL.createObjectURL(o);g(m=>({...m,[a]:{file:o,preview:r}}))}},M=o=>{g(a=>{const r={...a};return delete r[o],r})},z=()=>{if(c>0){let o=0;n.charge_type_deposit==="percentage"?o=parseFloat(c)*n.charge_deposit/100:o=parseFloat(n.charge_deposit??"0");let a=0;n.vat_deposit_type==="percentage"?a=parseFloat(c)*n.vat_deposit/100:a=parseFloat(n.vat_deposit??"0"),R(a),F(o);const r=parseFloat(c)+o+a;b(r>0?r:0)}else b(0)},D=()=>{const o=n.target_deposit;navigator.clipboard.writeText(o).then(()=>{l.success("Data copied to clipboard!")}).catch(a=>{l.error("Failed to copy: ",a)})};s.useEffect(()=>{p.props.amount&&j(p.props.amount)},[p.props.amount]),s.useEffect(()=>{p.props.method&&y(p.props.method)},[p.props.method]),s.useEffect(()=>{z()},[c,n]);const P=async o=>{var a;o.preventDefault();try{if(!n){l.error("Please select a Deposit method");return}if(c<=0){l.error("Please enter an amount");return}if(n.attachment&&(!d||!d.attachment)){l.error("Please upload an image");return}const r=new FormData;r.append("selectedMethod",n.id),r.append("amount",c),d.attachment&&r.append("attachment",d.attachment.file),n.client_fields&&n.client_fields.length>0&&n.client_fields.forEach(i=>{var x;if(i.type==="image")if(d[i.name.en])r.append(i.name.en,d[i.name.en].file);else{l.error(`Please upload an image for ${i.name[h]||i.name.en}`);return}else{const U=(x=document.getElementById(i.name.en))==null?void 0:x.value;r.append(i.name.en,U)}});const m={headers:{"X-CSRF-TOKEN":(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"),"Content-Type":"multipart/form-data"}},u=await O.post(route("client.dashboard.deposit.post"),r,m);u.data.success?(l.success(u.data.message+" with transaction id: "+u.data.tnx),setTimeout(()=>{V.Inertia.visit(route("client.dashboard.dashboard"))},1e3)):u.data.errors?Object.keys(u.data.errors).forEach(i=>{u.data.errors[i].forEach(x=>{l.error(x,{position:"bottom-center",duration:2e3})})}):l.error(u.data.message,{position:"top-center",duration:2e3})}catch(r){l.error("Error submitting form: "+r)}finally{}},[H,C]=s.useState(!1),[q,S]=s.useState(!1);return e.jsxs($,{children:[e.jsx("h1",{style:t.title,children:"Add Funds"}),e.jsx("div",{style:t.container,children:e.jsxs("div",{style:{width:"792px",height:"auto",backgroundColor:"#fff",borderRadius:"15px",padding:"20px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",textAlign:"center",marginTop:"12px"},children:[e.jsx("div",{style:t.header,children:n&&n.target_deposit&&e.jsxs("p",{style:t.phone,onClick:D,children:[n.target_deposit," ",e.jsx("img",{style:{padding:"8px"},src:G,alt:"copy"})]})}),e.jsxs("form",{style:t.form,onSubmit:I,children:[e.jsxs("div",{style:t.inputWrapperaddfunds,children:[e.jsx("label",{style:t.label,children:"Method of transfer"}),e.jsx("div",{style:{...t.inputWithIcon,display:"block"},children:e.jsx(Z,{options:T,onChange:o=>L(o),styles:{control:o=>({...o,fontSize:"15px"})},placeholder:"Select a Method",value:E})})]}),e.jsxs("div",{style:t.inputWrapperaddfunds,children:[e.jsx("label",{style:t.label,children:"Amount"}),e.jsxs("div",{style:t.inputWithIcon,children:[e.jsx("img",{style:t.icon,src:K,alt:"amount icon"}),e.jsx("input",{type:"text",placeholder:"Enter The Amount",style:{width:"90%",fontWeight:"bold",fontSize:"14px"},onChange:o=>j(o.target.value)})]})]}),n&&n.client_fields&&n.client_fields.length>0&&n.client_fields.map(o=>e.jsxs("div",{style:t.inputWrapperaddfunds,children:[e.jsx("label",{htmlFor:o.name[h],style:t.label,children:o.name[h]||o.name.en}),o.type==="text"&&e.jsx("input",{id:o.name.en,type:"text",required:o.required,style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"}}),o.type==="number"&&e.jsx("input",{id:o.name.en,type:"number",required:o.required,style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"}}),o.type==="image"&&e.jsx("input",{type:"file",name:o.name.en,style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"},onChange:a=>v(a.target.files[0],o.name.en),required:o.required})]},o.id)),e.jsxs("div",{style:t.row,children:[e.jsxs("div",{style:t.column,children:[e.jsx("label",{style:t.label,children:"Fees"}),e.jsxs("div",{style:t.inputWithCurrency,children:[e.jsx("input",{type:"text",placeholder:"0",style:t.inputSmall,value:_}),e.jsx("span",{style:t.currency,children:"EGP"})]})]}),e.jsxs("div",{style:t.column,children:[e.jsx("label",{style:t.label,children:"Vat"}),e.jsxs("div",{style:t.inputWithCurrency,children:[e.jsx("input",{type:"text",placeholder:"0",style:t.inputSmall,value:k}),e.jsx("span",{style:t.currency,children:"EGP"})]})]})]}),e.jsxs("div",{style:t.totalContainer,children:[e.jsx("h2",{style:t.totalLabel,children:"Total"}),e.jsxs("h3",{style:t.totalValue,children:[A," EGP"]})]}),n&&n.attachment!==!1&&e.jsxs("div",{style:t.inputWrapperaddfunds,children:[e.jsx("label",{style:t.label,children:"Uploading the file"}),e.jsxs("div",{style:t.fileUpload,children:[e.jsx("span",{style:t.uploadText,children:"Attach The File"}),e.jsx("input",{type:"file",style:t.fileInput,onChange:o=>v(o.target.files[0],"attachment")})]}),d&&d.attachment&&e.jsxs("div",{style:t.previewContainer,children:[e.jsx("img",{src:d.attachment.preview,alt:"Preview",style:t.previewImage}),e.jsx("button",{style:t.removeButton,onClick:()=>M("attachment"),children:"Remove"})]})]}),e.jsxs("div",{style:t.buttonContainer,children:[e.jsx("button",{type:"submit",style:{...t.sendButton,...H?t.sendButtonHover:{}},onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),onClick:P,children:"Send"}),e.jsx("button",{type:"button",style:{...t.cancelButton,...q?t.cancelButtonHover:{}},onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:"Cancel"})]})]}),e.jsxs("div",{style:t.logosContainer,children:[e.jsx("img",{src:N,alt:"Logo 1",style:t.logo}),e.jsx("img",{src:X,alt:"Logo 2",style:t.logo}),e.jsx("img",{src:J,alt:"Logo 3",style:t.logo}),e.jsx("img",{src:Q,alt:"Logo 4",style:t.logo}),e.jsx("img",{src:Y,alt:"Logo 5",style:t.logo})]})]})})]})},t={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"auto",backgroundColor:"#f9f9f9"},card:{width:"400px",backgroundColor:"#fff",borderRadius:"15px",padding:"20px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",textAlign:"center"},header:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},title:{fontSize:"1.4rem",fontWeight:"bold",color:"#808892",textAlign:"center","@media (max-width: 768px)":{textAlign:"center",fontWeight:"bold"}},phone:{fontSize:"16px",color:"#DFBC8A",textAlign:"right",cursor:"pointer",display:"flex",alignItems:"center"},phoneIcon:{marginLeft:"5px"},totalContainer:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},totalLabel:{fontSize:"24px",color:"#DFBC8A",fontWeight:"bold"},totalValue:{fontSize:"24px",color:"#DFBC8A",fontWeight:"bold"},form:{textAlign:"left"},inputWrapperaddfunds:{marginBottom:"15px"},label:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#DFBC8A",fontWeight:"bold"},inputWithIcon:{display:"flex",alignItems:"center",border:"1px solid #ddd",borderRadius:"5px",padding:"10px"},icon:{marginRight:"10px",width:"40px",height:"40px"},fileUpload:{display:"flex",alignItems:"center",justifyContent:"center",border:"1px dashed #ddd",borderRadius:"5px",height:"50px",color:"#999",fontSize:"14px",position:"relative"},uploadText:{pointerEvents:"none"},fileInput:{position:"absolute",width:"100%",height:"100%",opacity:0,cursor:"pointer"},previewContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#f9f9f9",borderRadius:"5px",padding:"10px",marginTop:"10px",border:"1px solid #ddd"},previewImage:{width:"60px",height:"60px",borderRadius:"5px",objectFit:"cover"},removeButton:{backgroundColor:"#e74c3c",color:"#fff",border:"none",padding:"5px 10px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},row:{display:"flex",justifyContent:"space-between",gap:"15px",marginBottom:"20px"},column:{width:"48%",display:"flex",flexDirection:"column"},inputWithCurrency:{display:"flex",alignItems:"center",border:"1px solid #ddd",borderRadius:"10px",padding:"10px",height:"50px",backgroundColor:"#f9f9f9",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.1)"},inputSmall:{flex:"1",border:"none",outline:"none",fontSize:"16px",textAlign:"left",color:"#555",backgroundColor:"transparent"},currency:{marginLeft:"-96px",fontSize:"16px",color:"#888",fontWeight:"bold"},buttonContainer:{display:"flex",justifyContent:"space-between",gap:"10px",marginTop:"20px"},sendButton:{flex:"1",backgroundColor:"#DFBC8A",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",fontSize:"16px",cursor:"pointer",transition:"background-color 0.3s"},sendButtonHover:{backgroundColor:"#a87c6b"},cancelButton:{flex:"1",backgroundColor:"#ddd",color:"#333",padding:"10px",borderRadius:"5px",border:"none",fontSize:"16px",cursor:"pointer",transition:"background-color 0.3s"},cancelButtonHover:{backgroundColor:"#bbb"},logosContainer:{display:"flex",justifyContent:"space-around",marginTop:"20px"},logo:{width:"55px",height:"55px"}};export{ce as default};
