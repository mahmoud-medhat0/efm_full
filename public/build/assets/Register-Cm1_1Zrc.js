import{r as d,u as L,t as o,j as e,L as P,a as _,_ as h}from"./app-BpGIzHtx.js";import{I as g}from"./InputErrorMessage-B23hLpQ0.js";import{B as F}from"./Button-BffAz3Vq.js";import{I as f}from"./Input-ZhXjnW-2.js";import{u as k}from"./index.esm-B6mMBcmf.js";import{R as D,r as M}from"./index-D3jM5zpc.js";import{o as q}from"./index.esm-C_0877_O.js";import{U as B}from"./index-CoKQV9GS.js";import{R as C}from"./layout-DbZtQxt3.js";import{s as c}from"./index-C4JomMCi.js";import"./Footer-BjMdAvPu.js";import"./use-is-mounted-DbcdCoFy.js";import"./transition-DamYcwDo.js";import"./twitter-C2_HC0eX.js";const Y=()=>{const[j,l]=d.useState(!1),[i,R]=d.useState(""),{referral_code:y}=L().props,{register:m,handleSubmit:b,formState:{errors:p}}=k({resolver:q(M)}),w=async s=>{l(!0);try{const r={...s,phone:i};(await _.post(c("client.register.post"),r)).data.success&&(h.success("Register is done, you will navigate after 2 seconds!",{position:"bottom-center",duration:4e3}),setTimeout(()=>{c("client.login")},1500))}catch(r){const t=r.response.data.errors||["An unexpected error occurred"];Object.keys(t).forEach(a=>{h.error(`${a}: ${t[a]}`,{position:"top-right",duration:4e3})})}finally{l(!1)}},N=D.map(({name:s,placeholder:r,type:t,forl:a,placel:v,validation:x},S)=>{var u;console.log(r);const E=o(v),n=o(r.replace("..","").trim());return console.log(n),e.jsx("div",{children:e.jsxs("div",{className:"space-y-2 pb-1",children:[e.jsx("label",{htmlFor:a,className:"text-black text-xl",children:E}),s==="phone"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{value:i,defaultCountry:"eg",onChange:I=>R(I)}),(i.trim()===""||i.trim().length<=2)&&e.jsx(g,{msg:"Phone is Required!"})]}):s==="referral_code"?e.jsx(f,{value:y,type:t,placeholder:n,...m(s,x)}):e.jsx(f,{id:a,type:t,placeholder:n,...m(s,x)}),p[s]&&e.jsx(g,{msg:(u=p[s])==null?void 0:u.message})]})},S)});return e.jsx(C,{children:e.jsxs("section",{className:"w-[800px] my-24 mx-auto max-sm:w-full max-sm:px-3 pt-20",children:[e.jsx("h2",{className:"text-primary text-2xl pb-6 text-center",children:o("Register with a new account!")}),e.jsxs("form",{className:"w-[800px] space-y-3 mx-auto max-sm:w-full",onSubmit:b(w),children:[N,e.jsx(F,{fullWidth:!0,isLoading:j,children:o("Register")}),e.jsx("div",{className:"flex flex-col space-y-2",children:e.jsxs(P,{href:c("client.login"),className:"text-black",children:[o("Having an account here?"),e.jsx("span",{className:"underline ml-1 text-primary",children:o("Login now!")})]})})]})]})})};export{Y as default};
