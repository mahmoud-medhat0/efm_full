import{u as y,r as i,j as e,_ as s,a as F,I as D}from"./app-DwP5ZHId.js";import{m as E}from"./mony-DzEy0_kf.js";import{u as _}from"./upgreed-DkaPh9uY.js";import{D as L}from"./DashboardLayout-D1zeXqou.js";import{S as N}from"./react-select.esm-DdkmZjfD.js";import{u as $}from"./index.esm-D4UpaK7B.js";import"./index-C4JomMCi.js";import"./emotion-react.browser.esm-DTshvNkP.js";import"./floating-ui.dom-BHs9XJpa.js";const J="/build/assets/withdraw-DZlnzzmm.svg",ee=()=>{const x=y().props.methods,{lang:w,app_url:j}=y().props,[S,h]=i.useState(!1),v=()=>h(!0),g=()=>h(!1),[a,C]=i.useState(null),[I,W]=i.useState([]),[l,k]=i.useState(0),[z,m]=i.useState(0);i.useState([]);const B=x.map(o=>({value:o.id,label:e.jsxs("div",{style:{display:"flex",alignItems:"center",fontSize:"12px"},children:[e.jsx("img",{src:`${j}/storage/${o.logo}`,alt:`${o.name} Icon`,style:{width:"20px",marginRight:"8px"}}),o.name]})})),A=o=>{const r=x.find(d=>d.id===o.value);C(r),W(o),r&&r.withdrawAccounts.length==0&&r.withdrawFields&&r.withdrawFields.length>0&&(s.error("You don't have any withdraw accounts. Please add one to proceed.",{position:"bottom-center",duration:3e3}),v())},{register:T,handleSubmit:M,setError:P,formState:{errors:G}}=$(),O=async o=>{var r,d,b,f;try{o.selectedMethod=a.id;const n=await F.post(route("client.dashboard.withdraw-account"),o);(n.status===200||n.status===201)&&n.data.success?(s.success(n.data.message,{position:"bottom-center",duration:2e3}),g(),setIsLoading(!1),D.visit(route("client.dashboard.withdraw"))):n.data.success===!1?n.data.errors?Object.keys(n.data.errors).forEach(c=>{n.data.errors[c].forEach(u=>{s.error(u,{position:"bottom-center",duration:2e3})})}):s.error(n.data.message||"An error occurred",{position:"bottom-center",duration:2e3}):s.error(n.data.message||"An error occurred",{position:"bottom-center",duration:2e3})}catch(n){console.error("Error during withdraw account creation:",n);const c=n,u=((b=(d=(r=c.response)==null?void 0:r.data.error)==null?void 0:d.details)==null?void 0:b.message)||((f=c.response)==null?void 0:f.data.message)||"An error occurred during withdraw account creation";s.error(`Withdraw account creation failed: ${u}`,{position:"bottom-center",duration:3e3})}},R=o=>{const r=parseFloat(o.target.value);k(r),p()};i.useEffect(()=>{p()},[l]);const p=()=>{if(l>0){let o=0;a.charge_type_withdraw==="percentage"?o=parseFloat(l)*a.charge_withdraw/100:o=parseFloat(a.charge_withdraw);const r=parseFloat(l)-o;m(r>0?r:0)}else m(0)};return e.jsxs(L,{children:[e.jsx("h2",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"#808892",textAlign:"center"},children:"Withdraw Funds"}),e.jsxs("div",{style:t.card,children:[e.jsx("div",{style:t.logo,children:e.jsx("img",{style:t.logoTitle,src:_,alt:"Logo"})}),a&&a.withdrawAccounts.length>0&&a.withdrawAccounts.map(o=>e.jsxs("div",{style:t.inputWrapper,children:[e.jsx("label",{style:t.label,children:Object.keys(JSON.parse(o.data))[0].replace(/\b\w/g,r=>r.toUpperCase())}),e.jsx("div",{style:t.inputWithIcon,children:e.jsx("input",{disabled:!0,value:JSON.parse(o.data)[Object.keys(JSON.parse(o.data))[0]],placeholder:Object.keys(JSON.parse(o.data))[0],style:t.input})})]})),e.jsxs("form",{style:t.form,children:[e.jsxs("div",{style:t.inputWrapper,children:[e.jsx("label",{style:t.label,children:"Method"}),e.jsx("div",{style:{...t.inputWithIcon,display:"block"},children:e.jsx(N,{options:B,className:t.orderInput,styles:{control:o=>({...o,fontSize:"15px"})},placeholder:"Select a service",style:{fontSize:"15px"},value:I,onChange:o=>A(o)})})]}),e.jsxs("div",{style:t.inputWrapper,children:[e.jsx("label",{style:t.label,children:"Amount"}),e.jsxs("div",{style:t.inputWithIcon,children:[e.jsx("img",{style:t.icon,src:E,alt:"Amount Icon"}),e.jsx("input",{type:"number",placeholder:"0",style:t.inputes,value:l,onKeyDown:o=>{o.key==="Enter"&&(o.preventDefault(),p())},onInput:R,min:"0"}),e.jsx("span",{style:t.egpText,children:"EGP"})]})]}),e.jsxs("div",{style:t.inputWrapper,children:[e.jsx("label",{style:t.label,children:"Total"}),e.jsxs("div",{style:t.inputWithIcon,children:[e.jsx("img",{style:t.icon,src:J,alt:"Total Icon"}),e.jsx("input",{type:"text",placeholder:"0",style:t.inputes,value:z,disabled:!0}),e.jsx("span",{style:t.egpText,children:"EGP"})]})]}),e.jsxs("div",{style:t.buttonContainer,children:[e.jsx("button",{type:"submit",style:t.upgradeButton,children:"Send"}),e.jsx("button",{type:"button",style:t.cancelButton,children:"Cancel"})]})]})]}),S&&e.jsx("div",{style:t.modalOverlay,children:e.jsxs("div",{style:t.modal,children:[e.jsx("h2",{style:t.modalTitle,children:"Add Withdraw Account"}),e.jsx("p",{style:t.modalSubtitle,children:"The Selected Method has the following fields"}),e.jsx("div",{style:t.modalInputWrapper,children:a.withdrawFields.map(o=>e.jsxs("div",{children:[e.jsx("label",{style:t.modalLabel,children:o.name[w]}),e.jsx("div",{style:t.inputWithIcon,children:e.jsx("input",{type:o.type,placeholder:o.name.en,style:t.input,...T(o.name.en)})})]},o.id))}),e.jsxs("div",{style:t.modalButtonContainer,children:[e.jsx("button",{style:t.upgradeButton,onClick:M(O),children:"send"}),e.jsx("button",{style:t.cancelButton,onClick:g,children:"Cancel"})]})]})})]})},t={headerText:{fontSize:"20px",fontWeight:"bold",color:"#808892",textAlign:"center",margin:"0 auto"},orderInput:{width:"100%",padding:"10px",marginTop:"5px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#fff",transition:"border-color 0.3s ease",fontSize:"0.7em"},input:{border:"none",outline:"none",fontSize:"85%",color:"#555",backgroundColor:"unset"},inputes:{border:"none",outline:"none",fontSize:"85%",color:"#555",width:"90%"},card:{width:"100%",maxWidth:"792px",backgroundColor:"#fff",borderRadius:"15px",padding:"20px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",textAlign:"center",margin:"20px auto"},logoTitle:{width:"73px",margin:"10px auto"},inputWrapper:{marginBottom:"15px",width:"100%"},label:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold",marginRight:"632px",color:"#DFBC8A"},inputWithIcon:{display:"flex",alignItems:"center",border:"1px solid #ddd",borderRadius:"5px",padding:"10px",width:"100%",position:"relative",flexDirection:"row"},egpText:{position:"absolute",right:"10px",fontSize:"14px",color:"#555"},methodIcon:{width:"30px",height:"30px",marginRight:"10px"},icon:{width:"20px",height:"20px",marginRight:"10px"},select:{flex:1,border:"none",outline:"none",fontSize:"16px",color:"#555",appearance:"none",backgroundColor:"transparent"},dropdownIcon:{fontSize:"20px",color:"#888"},buttonContainer:{display:"flex",justifyContent:"space-between",marginTop:"20px",flexDirection:"row"},upgradeButton:{flex:1,backgroundColor:"#DFBC8A",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",fontSize:"16px",cursor:"pointer",marginRight:"10px",transition:"background-color 0.3s ease",":hover":{backgroundColor:"#cfa06a"}},cancelButton:{flex:1,backgroundColor:"#ddd",color:"#333",padding:"10px",borderRadius:"5px",border:"none",fontSize:"16px",cursor:"pointer",transition:"background-color 0.3s ease",":hover":{backgroundColor:"#bbb"}},modalOverlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center"},modal:{width:"400px",backgroundColor:"#fff",borderRadius:"10px",padding:"20px",textAlign:"center"},modalTitle:{fontSize:"20px",marginBottom:"10px",color:"#808892"},modalSubtitle:{fontSize:"14px",marginBottom:"20px",color:"#808892"},modalInputWrapper:{display:"flex",alignItems:"center",border:"1px solid rgb(221, 221, 221)",borderRadius:"5px",padding:"10px"},modalLabel:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold",color:"#808892"},modalButtonContainer:{display:"flex",justifyContent:"space-between"},"@media (max-width: 768px)":{card:{padding:"15px"},inputWithIcon:{flexDirection:"column",alignItems:"flex-start"},buttonContainer:{flexDirection:"column"},egpText:{position:"static",marginTop:"5px"},upgradeButton:{marginRight:"0",marginBottom:"10px"}},"@media (max-width: 480px)":{card:{padding:"10px"},inputWithIcon:{padding:"5px"},upgradeButton:{fontSize:"14px",padding:"8px"},cancelButton:{fontSize:"14px",padding:"8px"}}};export{ee as default};
