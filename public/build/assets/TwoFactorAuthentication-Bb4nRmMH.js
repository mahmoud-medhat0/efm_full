import{r as s,R as p,u as te,j as e,a as F,n as k}from"./app-B3LvP6vR.js";import{W as se}from"./WelcomeTab-lAhBnStX.js";import ae from"./Layout-Bcxa3HKb.js";import{M as A}from"./Modal-BAnDWuYS.js";import{s as E}from"./index-C4JomMCi.js";import{I as re}from"./Input-CEvGxEbF.js";import{B as O}from"./Button-BD7aR169.js";import{F as U}from"./CheckBadgeIcon-B6HaQNQA.js";import{F as L}from"./XMarkIcon-DeD5plks.js";import{W as oe,H as G,y as le,p as ne,o as y,$ as ie,e as ce,w as de,D as ue,f as me,g as q}from"./use-is-mounted-CoUPU6IX.js";import{l as pe,T as fe,j as xe,p as he}from"./form-fields-D9nFLa-3.js";import{w as be,U as ge,a as we,G as je}from"./use-inert-others-RaaeDqRw.js";import{K as ve,z as ye,a as Ne,I as Ce}from"./use-text-value-DiTHcBwm.js";import{r as $e}from"./transition-rm9C6O2S.js";import"./character-B_L2WyuU.js";import"./LinkIcon-FZ5B7RMP.js";import"./Footer-CI8Y70p5.js";import"./twitter-C2_HC0eX.js";import"./Navbar-BNm30BXW.js";import"./ShoppingCartIcon-C80mMPZn.js";import"./DocumentCheckIcon-7Gtp40H0.js";let S=s.createContext(null);S.displayName="GroupContext";let Fe=s.Fragment;function ke(n){var i;let[t,c]=s.useState(null),[f,d]=ye(),[x,r]=ge(),m=s.useMemo(()=>({switch:t,setSwitch:c}),[t,c]),h={},b=n;return p.createElement(r,{name:"Switch.Description",value:x},p.createElement(d,{name:"Switch.Label",value:f,props:{htmlFor:(i=m.switch)==null?void 0:i.id,onClick(l){t&&(l.currentTarget instanceof HTMLLabelElement&&l.preventDefault(),t.click(),t.focus({preventScroll:!0}))}}},p.createElement(S.Provider,{value:m},G({ourProps:h,theirProps:b,slot:{},defaultTag:Fe,name:"Switch.Group"}))))}let Ee="button";function Se(n,i){var t;let c=s.useId(),f=Ne(),d=we(),{id:x=f||`headlessui-switch-${c}`,disabled:r=d||!1,checked:m,defaultChecked:h,onChange:b,name:l,value:N,form:C,autoFocus:u=!1,...$}=n,g=s.useContext(S),a=s.useRef(null),H=le(a,i,g===null?null:g.setSwitch),w=pe(h),[j,v]=fe(m,b,w??!1),K=ne(),[D,T]=s.useState(!1),P=y(()=>{T(!0),v==null||v(!j),K.nextFrame(()=>{T(!1)})}),Q=y(o=>{if($e(o.currentTarget))return o.preventDefault();o.preventDefault(),P()}),W=y(o=>{o.key===q.Space?(o.preventDefault(),P()):o.key===q.Enter&&he(o.currentTarget)}),_=y(o=>o.preventDefault()),B=Ce(),V=je(),{isFocusVisible:I,focusProps:z}=ie({autoFocus:u}),{isHovered:M,hoverProps:J}=ce({isDisabled:r}),{pressed:R,pressProps:X}=de({disabled:r}),Y=s.useMemo(()=>({checked:j,disabled:r,hover:M,focus:I,active:R,autofocus:u,changing:D}),[j,M,I,R,r,D,u]),Z=ue({id:x,ref:H,role:"switch",type:me(n,a),tabIndex:n.tabIndex===-1?0:(t=n.tabIndex)!=null?t:0,"aria-checked":j,"aria-labelledby":B,"aria-describedby":V,disabled:r||void 0,autoFocus:u,onClick:Q,onKeyUp:W,onKeyPress:_},z,J,X),ee=s.useCallback(()=>{if(w!==void 0)return v==null?void 0:v(w)},[v,w]);return p.createElement(p.Fragment,null,l!=null&&p.createElement(xe,{disabled:r,data:{[l]:N||"on"},overrides:{type:"checkbox",checked:j},form:C,onReset:ee}),G({ourProps:Z,theirProps:$,slot:Y,defaultTag:Ee,name:"Switch"}))}let De=oe(Se),Te=ke,Pe=ve,Ie=be,Me=Object.assign(De,{Group:Te,Label:Pe,Description:Ie});const st=()=>{const i=te().props.auth.client;console.log(i.is_2a);const[t,c]=s.useState(i.is_2a),[f,d]=s.useState(!1),[x,r]=s.useState(""),[m,h]=s.useState(""),[b,l]=s.useState(!1),N=()=>{t?l(!0):F.get(E("client.dashboard.2fa-qr-url")).then(a=>{r(a.data.qrCodeUrl),d(!0)})},C=()=>{F.post(E("client.dashboard.disable-2fa.post")).then(a=>{c(!1),k.success(a.data.message),l(!1)})},u=()=>{l(!1)},$=()=>{F.post(E("client.dashboard.enable-2fa.post"),{code:m}).then(a=>{a.data.success?(c(!0),d(!1),k.success(a.data.message)):k.error(a.data.message)})},g=()=>{d(!1)};return e.jsxs(ae,{children:[e.jsxs("div",{className:"w-full h-auto mt-20",children:[e.jsx(se,{}),e.jsxs("div",{className:"w-full px-2 py-12 sm:px-0",children:[e.jsx("h3",{className:"text-lg mb-4",children:"Two Factor Authentication"}),e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("div",{className:"border border-[#63778652] py-4 px-6 rounded-xl shadow-md flex flex-col space-y-5 flex-grow",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-5",children:[e.jsx("div",{className:"bg-[#E8F0F7] rounded-full w-14 max-sm:w-28 p-3",children:t?e.jsx(U,{className:"text-green-600"}):e.jsx(L,{className:"text-red-600"})}),e.jsx("div",{className:"flex flex-col items-start justify-between",children:e.jsx("h4",{className:`${t?"text-green-600":"text-red-600"} font-medium`,children:t?"Active":"Inactive"})})]}),e.jsxs(Me,{checked:t,onChange:N,className:`${t?"bg-green-600":"bg-red-600"} relative flex h-[29px] w-[64px] shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75`,children:[e.jsx("span",{className:"sr-only",children:"Use setting"}),e.jsx("span",{"aria-hidden":"true",className:`${t?"translate-x-9":"translate-x-0"} pointer-events-none flex justify-center items-center h-[25px] w-[25px] transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out`,children:t?e.jsx(U,{className:"text-green-600"}):e.jsx(L,{className:"text-red-600"})})]})]})})})]})]}),e.jsx(A,{isOpen:f,closeModal:g,title:"Scan this QR Code to Enable 2FA",description:"Use your authenticator app to scan the QR code below.",children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[e.jsx("img",{src:x,alt:"2FA QR Code",className:"mx-auto mb-4 w-50 max-w-xs h-50"}),e.jsx("p",{className:"text-center mb-4",children:"Please enter the code from your authenticator app to enable 2FA."}),e.jsx(re,{type:"number",onChange:a=>h(a.target.value),placeholder:"Enter code",className:"mt-2 w-full p-2 rounded border border-gray-300"}),e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx(O,{onClick:$,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Enable"}),e.jsx(O,{onClick:g,className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Close"})]})]})}),e.jsx(A,{isOpen:b,closeModal:u,title:"Confirm Disable 2FA",description:"Are you sure you want to disable Two Factor Authentication?",children:e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx("button",{onClick:C,className:"bg-red-500 text-white px-4 py-2 rounded",children:"Disable"}),e.jsx("button",{onClick:u,className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Cancel"})]})})]})};export{st as default};
